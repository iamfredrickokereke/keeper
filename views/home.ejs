<%- include ('includes/head') %>
<%- include ('includes/topbar') %>
<div class="container-fluid">
    <div class="row no-gutters">
        <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1">
            <h4 class="text-uppercase mb-3 font-weight-bold">Your contacts <small class="pl-2 text-muted">Logged in as <%= session.username %> </small></h4>
            <% if (messages.success) { %>
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <%= messages.success %> 
                    <a href="#" class="close" data-dismiss="alert" aria-label="Close">
                       <span aria-hidden="true">&times;</span>
                    </a>
                 </div>
            <% } %>    
            <% if (messages.error) { %>
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <%= messages.error %> 
                    <a href="#" class="close" data-dismiss="alert" aria-label="Close">
                       <span aria-hidden="true">&times;</span>
                    </a>
                 </div>
            <% } %>
            <table class="table table-striped table-responsive-sm text-center">
                <thead class="thead-dark">
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Phone</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                    <% if(data.contacts.length > 0){ %> 
                        <% data.contacts.forEach(cn => { %>
                            <tr>
                                <td><%= cn.name %></td>
                                <td><%= cn.email %></td>
                                <td><%= cn.phone %></td>
                                <td><a href="/contact/edit/<%= cn.id %>" class="badge p-1 d-inline badge-success badge-sm"><i class="lnr lnr-pencil"></i></a> <a href="/contact/delete/<%= cn.id %> " class="badge p-1 d-inline badge-danger badge-sm"><i class="lnr lnr-trash"></i></a></td>
                            </tr> 
                        <%});%>
                    <% } else { %>
                        <p class="text-muted text-center mt-3">No Contacts</p>
                    <% } %>  
                </tbody>
            </table>
        </div>
        <%- include ('includes/modals') %> 
    </div>
</div>
<%- include ('includes/footer') %>